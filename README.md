# ACASbot
## Article Context And Sentiment bot

# RU

## –û–±—â–µ–µ

–≠—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç–µ–π –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞–ø—Ä–æ—Å—ã –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π LLM, –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ ollama.

–ë–æ—Ç –æ–±–ª–∞–¥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–∂–∏–º–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏. –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ª—É—á—à–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–∞–º–æ–º—É –±–æ—Ç—É —Å –∫–æ–º–∞–Ω–¥–æ–π `help` –∏–ª–∏ `help [–∫–æ–º–∞–Ω–¥–∞]`.

–ò–º–µ—é—â–∏–π—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏;
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∏–ª–∏ –∫—Ä–∞—Ç–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞;
- –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞;
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –±–æ—Ç—É;
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–æ–¥–µ–ª–∏;
- —Å–º–µ–Ω–∞ –æ–¥–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ –¥—Ä—É–≥—É—é –Ω–∞ –ª–µ—Ç—É;
- –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å—Ç–∞—Ç—å–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ headless –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ñ–æ–ª–ª–±—ç–∫–æ–º –Ω–∞ –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å;
- –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –≤ Google —Ç–∞–±–ª–∏—Ü—É –∏/–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π XLSX —Ñ–∞–π–ª.

–ë–æ—Ç —Å–ø–æ—Å–æ–±–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ Google —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏: –¥–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∏—Å—Ç–æ—á–Ω–∏–∫ (–¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è), –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–∑–∞–≥–æ–ª–æ–≤–æ–∫), URL, —Ç–∏–ø –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞–∏–∏ (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π).

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å Google —Ç–∞–±–ª–∏—Ü–æ–π —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: —Å–æ–∑–¥–∞–Ω–∏—è Google –ø—Ä–æ–µ–∫—Ç–∞, –≤–∫–ª—é—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ API, –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –∫–ª—é—á–∞ –¥–æ—Å—Ç—É–ø–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –≥—É–≥–ª–∞, –∞ —Ç–∞–∫–∂–µ ID —Å–∞–º–æ–π —Ç–∞–±–ª–∏—Ü—ã (–∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏) –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ª–∏—Å—Ç–∞. –ë–æ—Ç —Å–∞–º –Ω–∞–π–¥–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å –≤ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ –¥–æ–±–∞–≤–∏—Ç –Ω–æ–≤—É—é –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏.

–ù—ã–Ω–µ—à–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –±–æ—Ç–æ–º –ø–æ–ª—å–∑—É—é–µ—Ç—Å—è –æ–¥–∏–Ω, –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ª—é–¥–µ–π, —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞, - –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–µ –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ª–∏—Ü–∞–º.


## –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- ollama —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –≤–æ–∑—å–º–∏—Ç–µ –º–æ–¥–µ–ª—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ >1 –º–∏–ª–ª–∏–∞—Ä–¥–∞);


## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –°–∏—Å—Ç–µ–º–∞: Windows, Linux, Mac (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ ollama. –°–∞–º –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–º)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: amd64
- –û–ó–£, –¶–ü, –ì–ü–£: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π LLM

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã:

- –¢–µ–ª–µ–≥—Ä–∞–º —Ç–æ–∫–µ–Ω;
- –†–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å ollama —Å –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ–ª—å—é;
- –§–∞–π–ª –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –æ—Ç Google;
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Google —Ç–∞–±–ª–∏—Ü–µ. 

### Telegram token

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞ —É @BotFather –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω.

### ollama –º–æ–¥–µ–ª—å

–ü–æ–¥–æ–π–¥–µ—Ç –ª—é–±–∞—è –º–æ–¥–µ–ª—å, —Å–ø–æ—Å–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ –ø–æ–º–æ—â–Ω–∏–∫–∞ –∏ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —Ç—Ä–µ–±—É–µ–º—ã–π —è–∑—ã–∫.

–ü—Ä–∏–º–µ—Ä: ollama pull bambucha/saiga-llama3:latest

### Google —Ç–∞–±–ª–∏—Ü–∞

- –í–æ–π–¥–∏—Ç–µ –≤ [Google Cloud](https://console.cloud.google.com), —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç;
- –í `API & Services` –≤–∫–ª—é—á–∏—Ç–µ `Google Sheets API`;
- –í `Credentials`—Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ JSON —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–∞;
- –°–æ–∑–¥–∞–π—Ç–µ Google —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –≤ —Ä–æ–ª–∏ –ø—Ä–∞–≤—â–∏–∫–∞;
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã (–ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω—è—è, –¥–ª–∏–Ω–Ω–∞—è —á–∞—Å—Ç—å URL –¥–æ /view –∏–ª–∏ /edit, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Ü–∏—Ñ—Ä);
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞ (–û–±—ã—á–Ω–æ `Sheet 1` –∏–ª–∏ `–õ–∏—Å—Ç 1`).

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –æ–Ω —Å–æ–∑–¥–∞—Å—Ç –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ù—ã–Ω–µ—à–Ω—è—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```json
{
	"telegram": {
		"api_token": "tg_api_token",
		"is_public": true,
		"allowed_user_ids": []
	},
	"ollama": {
		"general_model": "bambucha/saiga-llama3:latest",
		"query_timeout_seconds": 600,
		"prompts": {
			"affiliation": "–û–ø–∏—à–∏ –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º, –∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ç–µ–∫—Å—Ç–µ –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\". –ï—Å–ª–∏ –Ω–µ –∏–º–µ–µ—Ç, –æ—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ \"–°–≤—è–∑–∏ –Ω–µ—Ç\"\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}",
			"sentiment_short": "–û–ø—Ä–µ–¥–µ–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\" –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ç–µ–∫—Å—Ç–µ. –í–∞—Ä–∏–∞–Ω—Ç—ã: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π. –û—Ç–≤–µ—á–∞–π –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞–π \"–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π\".\n\n–¢–µ–∫—Å—Ç: \n{{TEXT}}",
			"sentiment_long": "–û–ø—Ä–µ–¥–µ–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\" –≤ —Ç–µ–∫—Å—Ç–µ. –í–∞—Ä–∏–∞–Ω—Ç—ã: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞–π \"–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π\". –û–±–æ—Å–Ω—É–π –æ—Ç–≤–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:\n[–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º]\n–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: [—Ç–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}",
			"title": "–ò–∑–≤–ª–µ–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏ –∏–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}"
		},
		"embedding_model": "bge-m3:latest"
	},
	"sheets": {
		"push_to_google_sheet": true,
		"google": {
			"config": {
				"credentails": null,
				"spreadsheet_id": "spreadsheet_id",
				"sheet_name": "Sheet 1"
			},
			"credentials_file": "secret.json"
		}
	},
	"analysis": {
		"object": "–õ—é–¥–∏, –∂–∏—Ç–µ–ª–∏",
		"object_metadata": "",
		"max_content_size": 8000,
		"save_similar_articles": true
	},
	"debug": false,
	"database": {
		"file": "ACASBOT.sqlite3"
	}
}
```

- –¢–æ–∫–µ–Ω —Ç–µ–ª–µ–≥—Ä–∞–º–∞ –≤–Ω–æ—Å–∏—Ç—Å—è –≤ `api_token`;
- LLM –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–º ollama –≤–Ω–æ—Å–∏—Ç—Å—è –≤ `model`;
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–æ—Å—Ç—É–ø–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–∏—à–µ—Ç—Å—è –≤ `credentials_file`;
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∞–±–ª–∏—Ü—ã - `spreadsheet_id`;
- –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞ - `sheet_name`.

–ù–∞ —ç—Ç–æ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–∫–æ–Ω—á–µ–Ω–∞, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è —Å–∞–º–æ–≥–æ –±–æ—Ç–∞.

–¢–∞–∫ –∫–∞–∫ –ø—Ä–æ–º–ø—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä:


–ó–∞–ø—Ä–æ—Å:
`do https://somenewswebsite.org/news/article12345`

–û—Ç–≤–µ—Ç:
```
üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

–ó–∞–≥–æ–ª–æ–≤–æ–∫: –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏

–¢–µ–º–∞: –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ —Ç–µ–∫—Å—Ç–∞

–û—Ç–Ω–æ—à–µ–Ω–∏–µ: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π
–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –¢–µ–∫—Å—Ç –Ω–µ –Ω–µ—Å–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Ü–µ–Ω–∫–∏.
```

–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –æ–ø—Ü–∏–∏ `push_to_google_sheet`, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏ –≤ Google —Ç–∞–±–ª–∏—Ü—É.


## –õ–∏—Ü–µ–Ω–∑–∏—è

GPLv3. –î–ª—è –±–æ–ª—å—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º. `COPYING`.


# EN

## General

This is a very specific telegram bot suited for the analysis of articles for their relation to a certain organization using requests to a local LLM running via ollama.

The bot has several modes and settings. For specific information, it is better to contact the bot itself with the `help` command.

Available functionality:
- changing the organization name;
- the ability to conduct a full or brief analysis;
- enabling/disabling the bot's publicity;
- adding/removing users with access to the bot;
- adding/removing users with access to the bot;
- changing model prompts;
- changing one installed local model to another on the fly;
- getting information using a standalone browser with fallback on a regular request;
- sending analysis results to a Google spreadsheet and/or a local XLSX file.

The bot can automatically add the resulting information to the Google table in the following line format: publication date, source (domain name), short description (title), URL, type of relation to the organization (informational, negative, positive).

Setting up automatic work with the Google table requires configuration: creating a Google project, enabling the corresponding API, obtaining a service account and an access key from Google, as well as the ID of the table itself (from the address bar) and the name of the sheet. The bot itself will find the last entry in the above-described structure and add a new one when the analysis of the next article is completed.

The current implementation implies that the bot is used by one or several people connected to each other, since the setting is global - changes made by one user are reflected in all subsequent requests without reference to specific persons.

## Software dependencies

- ollama with local LLM (recommendation: take a model with the number of parameters > 1b);

## System requirements

- System: Windows, Linux, Mac (supported by ollama. The bot itself is cross-platform)
- Architecture: amd64
- RAM, CPU, GPU: Depending on the selected LLM

## Setup

For work you need:

- Telegram token;
- Working ollama service with an available model;
- Access file for the service account from Google;
- Information about the Google table.

### Telegram token

Register the bot with @BotFather and get a token.

### ollama model

Any model that can work in assistant mode and understands the required language will do.

Example: ollama pull bambucha/saiga-llama3:latest

### Google spreadsheet

- Log in to [Google Cloud](https://console.cloud.google.com), create a project;
- In `API & Services` enable `Google Sheets API`;
- In `Credentials` create a service account and get a JSON access file;
- Create a Google spreadsheet, add the service account as an editor;
- Copy the spreadsheet ID (the penultimate, long part of the URL before /view or /edit, consisting of various symbols and numbers);
- Copy the sheet name (usually `Sheet 1` or `Sheet 1`).

When you first run the bot, it will create a configuration file with default data in the working directory. The current configuration looks something like this:

```json
{
	"telegram": {
		"api_token": "tg_api_token",
		"is_public": true,
		"allowed_user_ids": []
	},
	"ollama": {
		"general_model": "bambucha/saiga-llama3:latest",
		"query_timeout_seconds": 600,
		"prompts": {
			"affiliation": "–û–ø–∏—à–∏ –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º, –∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ç–µ–∫—Å—Ç–µ –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\". –ï—Å–ª–∏ –Ω–µ –∏–º–µ–µ—Ç, –æ—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ \"–°–≤—è–∑–∏ –Ω–µ—Ç\"\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}",
			"sentiment_short": "–û–ø—Ä–µ–¥–µ–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\" –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ç–µ–∫—Å—Ç–µ. –í–∞—Ä–∏–∞–Ω—Ç—ã: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π. –û—Ç–≤–µ—á–∞–π –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞–π \"–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π\".\n\n–¢–µ–∫—Å—Ç: \n{{TEXT}}",
			"sentiment_long": "–û–ø—Ä–µ–¥–µ–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ \"{{OBJECT}}\" –≤ —Ç–µ–∫—Å—Ç–µ. –í–∞—Ä–∏–∞–Ω—Ç—ã: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞–π \"–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π\". –û–±–æ—Å–Ω—É–π –æ—Ç–≤–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:\n[–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º]\n–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: [—Ç–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}",
			"title": "–ò–∑–≤–ª–µ–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏ –∏–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.\n\n–¢–µ–∫—Å—Ç:\n{{TEXT}}"
		},
		"embedding_model": "bge-m3:latest"
	},
	"sheets": {
		"push_to_google_sheet": true,
		"google": {
			"config": {
				"credentails": null,
				"spreadsheet_id": "spreadsheet_id",
				"sheet_name": "Sheet 1"
			},
			"credentials_file": "secret.json"
		}
	},
	"analysis": {
		"object": "–õ—é–¥–∏, –∂–∏—Ç–µ–ª–∏",
		"object_metadata": "",
		"max_content_size": 8000,
		"save_similar_articles": true
	},
	"debug": false,
	"database": {
		"file": "ACASBOT.sqlite3"
	}
}
```

- Telegram token goes into `api_token`;
- LLM in the format which is understood by ollama is entered into `model`;
- Path to the service account access file is written in `credentials_file`;
- Spreadsheet ID - `spreadsheet_id`;
- Sheet name - `sheet_name`.

That's it for the setup, the rest can be controlled and changed using the bot itself.

Since the prompts are moved to the configuration file, you can control the language of the response from LLM.

## Usage

Example:

Request:
`do https://somenewswebsite.org/news/article12345`

Response:

```
üìã Analysis results

Title: article title

Topic: Main topic of the text

Relation: Informational
Justification: The text does not carry a specific assessment.
```

If configured correctly and the `push_to_google_sheet` option is enabled, the information will be added to the Google sheet.

## License

GPLv3. For more information, see `COPYING`.